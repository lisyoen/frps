# Cline 프로젝트 지시사항

## 개발 환경 설정
- **Eclipse 설치 경로**: `D:\eclipse-rcp\`
- **Eclipse Workspace**: `D:\git\cline-for-eclipse\eclipse-plugin\workspace\`
- **프로젝트 경로**: `D:\git\cline-for-eclipse\`
- **플러그인 프로젝트**: `D:\git\cline-for-eclipse\eclipse-plugin\ai.devops.cline\`

## 코드 품질 관리

### 문법 오류 확인 및 수정
**코드 변경 후 반드시 `get_errors` 도구로 문법 오류 확인:**
- Eclipse 플러그인 코드 수정 시 `get_errors` 도구 사용
- VSCode workspace 통합으로 Eclipse 없이도 문법 오류 파악 가능
- 발견된 오류는 즉시 수정
- import 누락, 타입 불일치 등 모든 컴파일 에러 해결

**예시:**
```
1. 코드 수정 완료
2. get_errors 실행하여 에러 확인
3. 에러 발견 시 즉시 수정
4. 다시 get_errors로 검증
5. 에러 없을 때까지 반복
```

### Eclipse 프로젝트 특성
- Eclipse PDE 프로젝트 (Maven 아님)
- `.classpath`, `MANIFEST.MF` 의존성 관리
- Eclipse API 사용 시 Require-Bundle 확인

## Tool 사용 원칙 (중요!) ⚠️

### 실행 가능한 질문은 반드시 도구 사용
사용자가 실행 가능한 작업을 요청할 때는 **반드시 도구를 사용해서 실행**합니다.

**잘못된 예 (절대 금지!):**
```
User: "C: 드라이브 남은용량은?"
Assistant: "wmic logicaldisk 명령어를 사용하세요..." ❌
```

**올바른 예:**
```
User: "C: 드라이브 남은용량은?"
Assistant: [run_in_terminal 도구 실행] ✅
결과: "C: 드라이브 남은 용량: 150GB"
```

**도구 사용이 필요한 경우:**
- 파일 시스템 정보 조회 (용량, 파일 목록 등)
- 시스템 정보 확인 (프로세스, 메모리 등)
- 코드 실행 및 결과 확인
- 파일 읽기/쓰기/수정
- 디렉토리 탐색
- Git 작업
- 빌드/테스트 실행

**명령어만 알려주는 경우 (예외):**
- 사용자가 "명령어만 알려줘"라고 명시적으로 요청
- 복잡한 설정이 필요해서 단계별 설명이 필요한 경우

**원칙:**
1. **실행 가능하면 → 도구 사용**
2. 설명만 필요하면 → 답변만
3. 애매하면 → 도구 사용 (더 안전)

## 최근 완료 작업

### ✅ Tool 자동 실행 (VSCode Cline 방식)
**현재 동작**: Tool 실행 후 **자동으로 계속 진행** (VSCode Cline과 동일)
- `list_files` 실행 → 자동으로 다음 응답 요청
- LLM이 작업을 완료할 때까지 계속 진행
- Continue 버튼은 **비상용** (사용자가 원하면 수동 제어 가능)

**구현** (ClineView.java):
```java
if (didToolUse) {
    executeTools();
    appendHtml("Tools 실행 완료. 자동으로 계속 진행합니다...");
    continueAfterToolExecution();  // ✅ 자동 실행
}
```

### ✅ Recent Tasks 세션 복원 기능
- Welcome Screen에 Recent Tasks 표시
- 세션 클릭 시 대화 히스토리 완벽 복원
- HTML 재렌더링으로 이전 대화 재현

### ✅ 입력창 UX 개선
- 입력창 항상 활성화 (LLM 대기 중에도 타이핑 가능)
- Enter 키로 전송, Shift+Enter로 줄바꿈

### ✅ 무한 루프 근본 해결
- JSON/XML Tool을 동등하게 처리
- `if-else if-else` 구조로 평탄화

## 완성된 주요 기능들 🎉

### 1. Tool Calling (JSON + XML) ✅
- JSON Tool Calls 완전 지원
- XML Tool Calls 파싱 및 실행
- Tool 실행 후 **자동 계속 진행** (VSCode Cline 방식)
- `execute_command`, `read_file`, `write_to_file`, `list_files` 구현

### 2. Recent Tasks ✅
- Welcome Screen에 Recent Tasks 표시
- 세션 자동 저장 (`saveCurrentSession()`)
- 세션 클릭 시 복원
- 대화 히스토리 재렌더링

### 3. Cancel/Resume Task ✅
- Cancel 버튼으로 LLM 요청 취소
- Resume Task 버튼으로 중단된 작업 재개
- 대화 히스토리 유지

### 4. UX 개선 ✅
- 입력창 항상 활성화
- Enter 키로 전송
- Shift+Enter로 줄바꿈
